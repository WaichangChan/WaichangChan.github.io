webpackJsonp([0],{79:function(e,r,t){"use strict";function n(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function a(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!==typeof r&&"function"!==typeof r?e:r}function o(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}Object.defineProperty(r,"__esModule",{value:!0});var i=t(0),f=t.n(i),u=t(80),c=t(84),s=(t.n(c),function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}()),l=function(e){function r(){var e,t,o,i;n(this,r);for(var f=arguments.length,c=Array(f),s=0;s<f;s++)c[s]=arguments[s];return t=o=a(this,(e=r.__proto__||Object.getPrototypeOf(r)).call.apply(e,[this].concat(c))),o.canvasRef=null,o.handleRef=function(e){e?(o.canvasRef=e,Object(u.b)(o.canvasRef.getContext("2d"))):Object(u.c)()},i=t,a(o,i)}return o(r,e),s(r,[{key:"render",value:function(){return f.a.createElement("section",{className:"topic-body"},f.a.createElement("h4",{className:"topic-title"},"\u4fc4\u7f57\u65af\u65b9\u5757"),f.a.createElement("canvas",{className:"tetris",width:200,height:320,ref:this.handleRef}))}}]),r}(i.Component);r.default=l},80:function(e,r,t){"use strict";function n(){E.clearRect(0,0,g*m,w*m);for(var e=0;e<w;e++)for(var r=0;r<g;r++)a(e,r)}function a(e,r){switch(k[e][r]){case 0:break;case 2:o(E,r*m,e*m,m,"#0f0");break;case 1:o(E,r*m,e*m,m)}}function o(e,r,t,n,a){e.fillStyle=a||"#f00",e.fillRect(r,t,n,n),e.strokeRect(r,t,n,n)}function i(e,r){var t=e.x-1,n=t+3,a=e.y-1,o=a+3;if(!(t<0||n-1===g)){void 0===r&&(r=90);var i=null,f=u(e);if(!0!==f){switch(f){case"right":if(1===k[o][e.x]?c(e,2):c(e)){var l=u(e);if(l instanceof Array){t=e.x-1,n=t+3,a=e.y-1,o=a+3,i=l;break}1===k[o][e.x]?s(e,2):s(e)}return;case"left":if(s(e)){var v=u(e);if(v instanceof Array){t=e.x-1,n=t+3,a=e.y-1,o=a+3,i=v;break}c(e)}return;case"top":case"bottom":return;default:i=f}var y=k[e.y][n],h=k[o][e.x];1!==y||90!==r&&270!==r?1!==h||90!==r&&270!==r||(k[e.y][n]=1,k[o][e.x]=0):(k[e.y][n]=0,k[o][e.x]=1);for(var b=a,p=0;b<o;b++,p++)for(var x=t,d=0;x<n;x++,d++)2!==k[b][x]&&(k[b][x]=i[p][d])}}}function f(e){for(var r=e.y+3;r>=e.y;r--)for(var t=e.x-1,n=t+4;t<n;t++)if(!k[r]||2===(k[r][t]&&k[r][t])){var a=r-1;if(k[a]&&1===k[a][t])return!1}for(var o=e.y+3;o>=e.y;o--)for(var i=e.x-1,f=i+4;i<f;i++){var u=o-1;if(k[u]&&k[u][i]){var c=k[u][i];1===c&&(k[o][i]=c,k[o-1][i]=0)}}return e.y++,!0}function u(e){var r={x:e.x,y:e.y-1,value:k[e.y-1][e.x]};if(1===r.value&&2===k[r.y][e.x-1])return"left";var t={x:e.x-1,y:e.y,value:k[e.y][e.x-1]};if(1===t.value&&2===k[e.y+1][t.x])return"left";var n={x:e.x+1,y:e.y,value:k[e.y][e.x+1]};if(1===n.value&&2===k[e.y-1][n.x])return"right";if(1==={x:e.x,y:e.y+1,value:k[e.y+1][e.x]}.value&&2===k[e.y][e.x+1])return"right";var a=e.x+2,o=e.y+2,i=k[e.y][a],f=k[o]&&k[o][e.x];if(1===i){if(2===f||void 0===f)return!0}else if(1===f&&(2===i||void 0===i))return"right";if(2===k[o][a]||2===k[e.y+1][a])return"right";var u=e.x-1;a=u+3;var c=e.y-1;o=c+3;for(var s=[[0,0,0],[0,0,0],[0,0,0]],l=c,v=0;l<o;l++,v--)for(var y=u,h=0;y<a;y++,h++){var b=q*(h-1)-P*(v+1)+1+.01>>0,p=-1*(q*(v+1)+P*(h-1)-1-.01)>>0,x=u+b;if(2===k[c+p][x]){if(x<e.x)return"left";if(x>e.x)return"right"}2!==k[l][y]&&(s[p][b]=k[l][y]?1:0)}return s}function c(e,r){if(0===e.x)return!1;r=r||1;for(var t=e.x-1,n=t+3,a=e.y-1,o=a+4,i=t;i<n;i++)for(var f=a;f<o;f++){var u=k[f];if(u&&1===u[i])for(var c=1;c<=r;){if(void 0===u[i-c]||2===u[i-c])return!1;c++}}n+=2,o+=1;for(var s=t;s<n;s++)for(var l=a;l<o;l++){var v=k[l]&&k[l][s],y=s-r,h=k[l]&&k[l][y];1===v?k[l][y]=v:2!==h&&h&&(k[l][y]=0)}return e.x-=r,!0}function s(e,r){if(e.x!==g-1){r=r||1;for(var t=e.x-1,n=e.x+2,a=e.y-1,o=a+3,i=n;i>=t;i--)for(var f=a;f<o;f++){var u=k[f];if(u&&1===u[i])for(var c=1;c<=r;){if(void 0===u[i+c]||2===u[i+c])return!1;c++}}t--,o+=2;for(var s=n;s>=t;s--)for(var l=a;l<o;l++){var v=k[l]&&k[l][s],y=s+r,h=k[l]&&k[l][y];1===v?k[l][y]=v:2!==h&&h&&(k[l][y]=0)}return e.x+=r,!0}}function l(e){for(var r=e.x-1,t=r+4,n=e.y-1,a=n+4,o=r;o<t;o++)for(var f=n;f<a;f++){var u=k[f];u&&1===u[o]&&(u[o]=2)}var c=d.a[Math.random()*d.a.length>>0];e.x=g/2>>0,e.y=1,r=e.x-1,t=r+4,n=e.y-1,a=n+4;for(var s=n,l=0;s<a;s++,l++)for(var v=r,h=0;v<t;v++,h++){var b=c[l][h];if(0!==k[s][v])return console.log("GAME OVER"),void y();k[s][v]=b}var p=90*(4*Math.random()>>0);0!==k[3][e.x]&&0===p%180||i(e,p)}function v(){for(var e=[],r=0;r<w;r++){for(var t=!0,n=0;n<g;n++)if(2!==k[r][n]){t=!1;break}t&&e.push(r)}e.length>0&&(j=x.a.start(new x.b(E,3,e)),j.running=!0)}function y(){E.clearRect(0,0,g*m,w*m),E.fillStyle="#333333",E.textAlign="center",E.font="bold 30px Arial",E.fillText("GAME OVER",g*m*.5,w*m*.5),b()}function h(e){var r=Date.now();!(r-R>=500&&A!==O)||j&&j.running||(f(_)||(l(_),v()),A!==O&&n(),R=r),x.a.loop(e),C=window.requestAnimationFrame(h)}function b(){O=A,cancelAnimationFrame(C)}function p(e){E=e,E.strokeStyle="#00f",l(_),n(),h(0)}r.a=a,r.c=b,r.b=p;var x=t(83),d=t(81),m=d.b.bw,w=d.b.stageH,g=d.b.stageW,k=d.b.blocks,_={x:1,y:1},A=0,O=1,R=Date.now(),E=null,T=null,j=null,C=0,M=-Math.PI/2,q=Math.cos(M),P=Math.sin(M);document.onkeydown=function(e){switch(T=e.keyCode){case 32:i(_),n();break;case 37:c(_),n();break;case 39:s(_),n();break;case 40:f(_),n()}}},81:function(e,r,t){"use strict";t.d(r,"b",function(){return a}),t.d(r,"a",function(){return o});var n=new Array(16).fill(1).map(function(){return new Array(10).fill(0)}),a={bw:20,stageW:10,stageH:16,blocks:n},o=[[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]],[[0,1,0,0],[0,1,0,0],[0,1,1,0],[0,0,0,0]],[[0,1,0,0],[1,1,0,0],[0,1,0,0],[0,0,0,0]],[[1,1,0,0],[0,1,1,0],[0,0,0,0],[0,0,0,0]],[[1,1,0,0],[1,1,0,0],[0,0,0,0],[0,0,0,0]]]},83:function(e,r,t){"use strict";function n(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}t.d(r,"b",function(){return s}),t.d(r,"a",function(){return l});var a=t(80),o=t(81),i=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),f=o.b.bw,u=o.b.stageW,c=o.b.blocks,s=function(){function e(r,t,a){n(this,e),this._flashTime=t,this._rowsToRemove=a,this.index=null,this._lastTime=0,this.ctx=r}return i(e,[{key:"update",value:function(e){(0===this._lastTime||e-this._lastTime>300)&&(this.flashOut(this._flashTime,this._rowsToRemove),this._flashTime--,this._lastTime=e)}},{key:"flashOut",value:function(e,r){var t=this,n=this.ctx;n.save(),n.globalAlpha=e%2===0?.2:1,r.forEach(function(e){n.clearRect(0,e*f-1,u*f,f);for(var r=0;r<u;r++)Object(a.a)(e,r)}),n.restore(),e<0&&(l.stop(this.index),r.forEach(function(e){t.rowdown(e)}),this.running=!1)}},{key:"rowdown",value:function(e){for(var r=e;r>=0;r--)for(var t=0;t<u;t++)if(1!==c[r][t]){var n=r-1<0?0:c[r-1][t];c[r][t]=1===n?0:n}}}]),e}(),l={queue:{},start:function(e){var r="animate_"+this.queue.length;return this.queue[r]=e,e.index=r,e.running=!0,e},stop:function(e){delete this.queue[e]},loop:function(e){var r=this.queue;Object.keys(r).forEach(function(t){r[t].update&&r[t].update(e)})}}},84:function(e,r,t){var n=t(85);"string"===typeof n&&(n=[[e.i,n,""]]);var a={hmr:!1};a.transform=void 0;t(77)(n,a);n.locals&&(e.exports=n.locals)},85:function(e,r,t){r=e.exports=t(76)(!0),r.push([e.i,".tetris{border:1px solid #333}","",{version:3,sources:["/Users/weichengchen/work/javascript/demo-list/src/parts/TetrisComp.css"],names:[],mappings:"AAIA,QACE,qBAA0B,CAC3B",file:"TetrisComp.css",sourcesContent:["/* .wrapper {\n  text-align: center;\n} */\n\n.tetris{\n  border: 1px solid #333333;\n}"],sourceRoot:""}])}});
//# sourceMappingURL=0.55f74c8c.chunk.js.map